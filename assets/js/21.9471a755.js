(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{418:function(s,a,t){"use strict";t.r(a);var n=t(56),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"子查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#子查询"}},[s._v("#")]),s._v(" 子查询")]),s._v(" "),t("p",[s._v("子查询指一个查询语句嵌套在另一个查询语句内部的查询，这个特性从MySQL 4.1开始引入。")]),s._v(" "),t("p",[s._v("SQL 中子查询的使用大大增强了 SELECT 查询的能力，因为很多时候查询需要从结果集中获取数据，或者需要从同一个表中先计算得出一个数据结果，然后与这个数据结果（可能是某个标量，也可能是某个集合）进行比较。")]),s._v(" "),t("p",[s._v("子查询的基本使用   子查询的基本语法结构：     子查询（内查询）在主查询之前一次执行完成。")]),s._v(" "),t("p",[s._v("子查询的结果被主查询（外查询）使用 。")]),s._v(" "),t("p",[s._v("注意事项：     子查询要包含在括号内；")]),s._v(" "),t("p",[s._v("将子查询放在比较条件的右侧；")]),s._v(" "),t("p",[s._v("单行操作符对应单行子查询，多行操作符对应多行子查询。")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SELECT")]),s._v(" last_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("salary\nfrom employees\nWHERE salary "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\t\t\t\tSELECT salary\n\t\t\t\tFROM employees\n\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("WHERE")]),s._v(" last_name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token char"}},[s._v("'Abel'")]),s._v("\n\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("子查询的分类   按内查询的结果返回一条还是多条记录，将子查询分为单行子查询、 多行子查询 。   我们按内查询是否被执行多次，将子查询划分为相关(或关联)子查询和 不相关(或非关联)子查询。")]),s._v(" "),t("p",[s._v("子查询从数据表中查询了数据结果，如果这个数据结果只执行一次，然后这个数据结果作为主查询的条件进行执行，那么这样的子查询叫做不相关子查询。")]),s._v(" "),t("p",[s._v("同样，如果子查询需要执行多次，即采用循环的方式，先从外部查询开始，每次都传入子查询进行查询，然后再将结果反馈给外部，这种嵌套的执行方式就称为相关子查询。")]),s._v(" "),t("h2",{attrs:{id:"_1、单行子查询、多行子查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、单行子查询、多行子查询"}},[s._v("#")]),s._v(" 1、单行子查询、多行子查询")]),s._v(" "),t("p",[s._v("单行子查询   单行比较操作符 "),t("img",{attrs:{src:"https://img-blog.csdnimg.cn/9448ebbcea564aad8ecc89d0cceab7e4.png#pic_center",alt:"img"}})]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("#"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.")]),s._v(" 单行子查询\n#"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.1")]),s._v(" 单行操作符： "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" \n\n#题目：查询与"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("141")]),s._v("号员工的manager_id和department_id相同的其他员工\n#的employee_id，manager_id，department_id。\n#方式"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("：\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SELECT")]),s._v(" employee_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("manager_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("department_id\nFROM employees\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("WHERE")]),s._v(" manager_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\t\t\t\t\tSELECT manager_id\n\t\t\t\t\tFROM employees\n\t\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("WHERE")]),s._v(" employee_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("141")]),s._v("\n\t\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AND")]),s._v(" department_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\t\t\t\t\tSELECT department_id\n\t\t\t\t\tFROM employees\n\t\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("WHERE")]),s._v(" employee_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("141")]),s._v("\n\t\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nAND employee_id "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("141")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n#方式"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("：了解（成对查询）\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SELECT")]),s._v(" employee_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("manager_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("department_id\nFROM employees\nWHERE "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("manager_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("department_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\t\t\t\t    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SELECT")]),s._v(" manager_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("department_id\n\t\t\t      \tFROM employees\n\t\t\t\t    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("WHERE")]),s._v(" employee_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("141")]),s._v("\n\t\t\t\t   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nAND employee_id "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("141")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n#题目：查询最低工资大于"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("110")]),s._v("号部门最低工资的部门id和其最低工资\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SELECT")]),s._v("\tdepartment_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("MIN")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("salary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nFROM employees\nGROUP BY department_id\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HAVING")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("MIN")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("salary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\t\t\t\t\t "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("MIN")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("salary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t\t\t\t\t FROM employees\n\t\t\t\t\t "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("WHERE")]),s._v(" department_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("110")]),s._v("\n\t\t\t\t\t "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br")])]),t("p",[s._v("CASE中的子查询")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("#题目：显式员工的employee_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("last_name和location。\n#其中，若员工department_id与location_id为"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1800")]),s._v("的department_id相同，\n#则location为’"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Canada")]),s._v("’，其余则为’USA’。\n\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SELECT")]),s._v(" employee_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("last_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("CASE department_id WHEN "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("SELECT department_id\n                                                      FROM departments\n                                                      "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("WHERE")]),s._v(" location_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1800")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                                                      THEN "),t("span",{pre:!0,attrs:{class:"token char"}},[s._v("'Canada'")]),s._v("\n\t                                                  ELSE "),t("span",{pre:!0,attrs:{class:"token char"}},[s._v("'USA'")]),s._v(" END "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"location"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FROM")]),s._v(" employees"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("子查询中的空值问题     子查询不返回任何行")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("#"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.2")]),s._v(" 子查询中的空值问题\n\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SELECT")]),s._v(" last_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" job_id\nFROM   employees\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("WHERE")]),s._v("  job_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("SELECT job_id\n                 FROM   employees\n                 "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("WHERE")]),s._v("  last_name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token char"}},[s._v("'Haas'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("非法使用子查询")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("#"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.3")]),s._v(" 非法使用子查询\n#错误："),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Subquery")]),s._v(" returns more than "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" row\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SELECT")]),s._v(" employee_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" last_name\nFROM   employees\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("WHERE")]),s._v("  salary "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SELECT")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("MIN")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("salary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                 FROM     employees\n                 GROUP "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BY")]),s._v(" department_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("多行子查询   也称为集合比较子查询；")]),s._v(" "),t("p",[s._v("内查询返回多行；")]),s._v(" "),t("p",[s._v("使用多行比较操作符。")]),s._v(" "),t("p",[s._v("多行比较操作符 "),t("img",{attrs:{src:"https://img-blog.csdnimg.cn/16e49cb44a454d6194a2398bf4f472b4.png#pic_center",alt:"img"}})]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("# IN"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SELECT")]),s._v(" employee_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" last_name\nFROM   employees\nWHERE  salary IN\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SELECT")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("MIN")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("salary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                 FROM     employees\n                 GROUP "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BY")]),s._v(" department_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n\n# ANY "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" ALL"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n#题目：返回其它job_id中比job_id为‘IT_PROG’部门任一工资低的员工的员工号、\n#姓名、job_id 以及salary\n\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SELECT")]),s._v(" employee_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("last_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("job_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("salary\nFROM employees\nWHERE job_id "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" 'IT_PROG' \nAND salary "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" ANY "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n                  SELECT salary\n                  FROM employees\n                  "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("WHERE")]),s._v(" job_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 'IT_PROG' \n                 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n#题目：返回其它job_id中比job_id为‘IT_PROG’部门所有工资低的员工的员工号、\n#姓名、job_id 以及salary\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SELECT")]),s._v(" employee_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("last_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("job_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("salary\nFROM employees\nWHERE job_id "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" 'IT_PROG'\nAND salary "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" ALL "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\t\t          SELECT salary\n\t\t          FROM employees\n\t\t          "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("WHERE")]),s._v(" job_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 'IT_PROG'\n\t\t          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\t\n#题目：查询平均工资最低的部门id\n#"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MySQL")]),s._v("中聚合函数是不能嵌套使用的。"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("MIN")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("AVG")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("salary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("是错误的\n#方式"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("：\n\nSELECT department_id\nFROM employees\nGROUP BY department_id\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HAVING")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("AVG")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("salary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\t\t\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("MIN")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("avg_sal"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t\t\t\t\t\tFROM "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\t\t\t\t\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("AVG")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("salary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" avg_sal\n\t\t\t\t\t\t\t\tFROM employees\n\t\t\t\t\t\t\t\tGROUP "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BY")]),s._v(" department_id\n\t\t\t\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" t_dept_avg_sal\n\t\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n#方式"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("：\nSELECT department_id\nFROM employees\nGROUP BY department_id\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HAVING")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("AVG")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("salary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ALL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\t\n\t\t\t\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("AVG")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("salary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" avg_sal\n\t\t\t\t\t\t\tFROM employees\n\t\t\t\t\t\t\tGROUP "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BY")]),s._v(" department_id\n\t\t\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br")])]),t("p",[s._v("空值问题")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("#"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.3")]),s._v(" 空值问题\nSELECT last_name\nFROM employees\nWHERE employee_id "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("NOT")]),s._v(" IN "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\t\t\tSELECT manager_id\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FROM")]),s._v(" employees\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h2",{attrs:{id:"_2、相关子查询、不相关子查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、相关子查询、不相关子查询"}},[s._v("#")]),s._v(" 2、相关子查询、不相关子查询")]),s._v(" "),t("p",[s._v("相关子查询   如果子查询的执行依赖于外部查询，通常情况下都是因为子查询中的表用到了外部的表，并进行了条件关联，因此每执行一次外部查询，子查询都要重新计算一次，这样的子查询就称之为关联子查询。")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("#结论：在SELECT中，除了GROUP BY 和 LIMIT之外，其他位置都可以声明子查询！\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/*\nSELECT ....,....,....(存在聚合函数)\nFROM ... (LEFT / RIGHT)JOIN ....ON 多表的连接条件 \n(LEFT / RIGHT)JOIN ... ON ....\nWHERE 不包含聚合函数的过滤条件\nGROUP BY ...,....\nHAVING 包含聚合函数的过滤条件\nORDER BY ....,...(ASC / DESC )\nLIMIT ...,....\n*/")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("相关子查询按照一行接一行的顺序执行，主查询的每一行都执行一次子查询。")]),s._v(" "),t("p",[s._v("子查询中使用主查询中的列")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("#题目：查询员工中工资大于本部门平均工资的员工的last_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("salary和其department_id\n#方式"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("：使用相关子查询\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SELECT")]),s._v(" last_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("salary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("department_id\nFROM employees e1\nWHERE salary "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("AVG")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("salary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t\t\t\tFROM employees e2\n\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("WHERE")]),s._v(" department_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" e1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("department_id\n\t\t\t\t\t\t\t "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n#方式"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("：在FROM中声明子查询\nSELECT e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("last_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("salary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("department_id\nFROM employees e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SELECT")]),s._v(" department_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("AVG")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("salary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" avg_sal\n\t\t\t\tFROM employees\n\t\t\t\tGROUP "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BY")]),s._v(" department_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" t_dept_avg_sal\nWHERE e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("department_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" t_dept_avg_sal"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("department_id\nAND e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("salary "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" t_dept_avg_sal"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("avg_sal\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("p",[s._v("EXISTS 与 NOT EXISTS关键字   关联子查询通常也会和 EXISTS操作符一起来使用，用来检查在子查询中是否存在满足条件的行。")]),s._v(" "),t("p",[s._v("如果在子查询中不存在满足条件的行：     条件返回 FALSE     继续在子查询中查找")]),s._v(" "),t("p",[s._v("如果在子查询中存在满足条件的行：     不在子查询中继续查找     条件返回 TRUE")]),s._v(" "),t("p",[s._v("NOT EXISTS关键字表示如果不存在某种条件，则返回TRUE，否则返回FALSE。")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("#题目：查询公司管理者的employee_id，last_name，job_id，department_id信息\n#方式"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("：自连接\nSELECT DISTINCT mgr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("employee_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("mgr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("last_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("mgr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("job_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("mgr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("department_id\nFROM employees emp JOIN employees mgr\nON emp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("manager_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" mgr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("employee_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n#方式"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("：子查询\n\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SELECT")]),s._v(" employee_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("last_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("job_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("department_id\nFROM employees\nWHERE employee_id IN "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\t\t\tSELECT DISTINCT manager_id\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FROM")]),s._v(" employees\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n#方式"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("：使用EXISTS\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SELECT")]),s._v(" employee_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("last_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("job_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("department_id\nFROM employees e1\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("WHERE")]),s._v(" EXISTS "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n\t       SELECT "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n\t       FROM employees e2\n\t       WHERE e1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("employee_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" e2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("manager_id\n\t     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("p",[s._v("相关更新")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("UPDATE table1 alias1\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SET")]),s._v(" column "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("SELECT expression\n\t\t\t  FROM table2 alias2\n\t\t\t  WHERE alias1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("column "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" alias2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("column"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("使用相关子查询依据一个表中的数据更新另一个表的数据。")]),s._v(" "),t("p",[s._v("题目：在employees中增加一个department_name字段，数据为员工对应的部门名称")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("# "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("）\nALTER TABLE employees\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ADD")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("department_name "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("VARCHAR2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n# "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("）\nUPDATE employees e\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SET")]),s._v(" department_name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("SELECT department_name\nFROM departments d\nWHERE e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("department_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("department_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("相关删除")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("DELETE FROM table1 alias1\nWHERE column operator "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("SELECT expression\nFROM table2 alias2\nWHERE alias1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("column "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" alias2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("column"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("使用相关子查询依据一个表中的数据删除另一个表的数据。")]),s._v(" "),t("p",[s._v("题目：删除表employees中，其与emp_history表皆有的数据")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("DELETE FROM employees e\nWHERE employee_id in\n\t\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("SELECT employee_id\n\t\t\t\t\t FROM emp_history\n\t\t\t\t\t "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("WHERE")]),s._v(" employee_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("employee_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);